#!/bin/bash
FOLLOWING="$HOME/.arching-kaos/following"
PROGRAM="$(basename $0)"
logit(){
    ak-logthis "$PROGRAM" "$1" "$2"
}
if [ ! -z $1 ]
then
    grep $1 $FOLLOWING
    if [ $? == 0 ]
    then
        logit "ERROR" "Already exists"
        exit 1
    fi
    echo $1 >> $FOLLOWING
    IPFS=$(ak-ipfs-add $FOLLOWING)
    if [ $? != 0 ]
    then
        logit "ERROR" "Addition failed"
        exit 1
    fi
    ak-profile set following $IPFS
    exit 0
fi
printf "Usage:\n\t%s <AKID_IPFS_CID_v0>\n" $PROGRAM
exit 1
