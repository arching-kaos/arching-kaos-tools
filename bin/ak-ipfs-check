#!/bin/bash
PROGRAM="$(basename $0)"
logit(){
	ak-logthis "$PROGRAM" "$1" "$2"
}

ak-ipfs-files-ls /zarchive > /dev/null
if [ $? != 0 ]
then
	logit "ERROR" "/zarchive is missing"
else
	logit "INFO" "/zarchive OK"
fi

ak-ipfs-files-ls /zlatest > /dev/null
if [ $? != 0 ]
then
	logit "ERROR" "/zlatest is missing"
else
	logit "INFO" "/zlatest is OK"
fi

ak-ipfs-key-list | grep zchain > /dev/null
if [ $? != 0 ]; then
	logit "WARNING" "zchain key is missing"
	ak-ipfs-key-gen zchain > $ZCHAIN
	if [ $? != 0 ]; then
		logit "ERROR" "zchain fails to create"
	else
		logit "INFO" "zchain created"
	fi
else
	logit "INFO" "zchain is there"
fi

ak-ipfs-key-list | grep ak-config > /dev/null
if [ $? != 0 ]; then
       	logit "WARNING" "ak-config key is missing"
	ak-ipfs-key-gen ak-config
	if [ $? != 0 ]; then
		logit "ERROR" "ak-config fails to create"
	else
		logit "INFO" "ak-config created"
	fi
else
	logit "INFO" "ak-config is there"
fi
